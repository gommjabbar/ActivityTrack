@model ActivityTrack.Models.ActivityEO

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <div class="form-horizontal" ng-controller="newActivityController">
        <h4 id="h4">Activity</h4>

        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.StartDate, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <input type="text" id="datepicker"ng-model="activity.startDate" style="width: 160px" />
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.EndDate, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <input type="text" id="datepicker1" ng-model="activity.endDate" style="width: 160px" />
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Description, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <input type="text" ng-model="activity.description" style="width: 160px;" />
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.ProjectId, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <input type"text" ng-model="activity.projectId" style="width: 160px;">
                </div>
            </div>

         <div class="form-group">
                @Html.LabelFor(model => model.TypeId, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    <input type"text" ng-model="activity.typeId" style="width: 160px;">
                </div>
             </div>

                @* <select ng-model="activity.project"
                    ng-options="project.name for project in allProjects track by project.id" style="width: 160px; height: 25px; margin-left: 15px;"></select>
            <input class="btn btn-default" type="button" id="btnShowNewProject" value="{{newProjectButtonText}}" ng-click="showHide()" />
            <div ng-show="showNewProject">
                <input type="text" ng-model="newProject.name" style="width: 160px; margin-left:210px" />
                <input class="btn btn-default" type="button" id="btnSaveNewProject" value="Save" ng-click="saveProject()" />
            </div>
                *@
            </div>

        @*<div ng-controller="myCtrl">

                <div style="float:left;">
                    <label style="margin-left:90px; margin-right:30px" for="fileToUpload">Upload File </label>
                </div>
                <div style="margin-left: auto  ">
                    <input type="file" file-model="myFile" />
                    <input class="btn btn-default" type="button" ng-click="uploadFile()" value="Upload" />
                </div>

            </div>*@

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="button" class="btn btn-default" value="Create" ng-click="addActivity()" />
            </div>
        </div>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script type="text/javascript">

    //var myApp = angular.module('myApp', []);

    //myApp.directive('fileModel', ['$parse', function ($parse) {
    //    return {
    //        restrict: 'A',
    //        link: function (scope, element, attrs) {
    //            var model = $parse(attrs.fileModel);
    //            var modelSetter = model.assign;

    //            element.bind('change', function () {
    //                scope.$apply(function () {
    //                    modelSetter(scope, element[0].files[0]);
    //                });
    //            });
    //        }
    //    };
    //}]);

    //myApp.service('fileUpload', ['$http', function ($http) {
    //    this.uploadFileToUrl = function (file, uploadUrl) {
    //        var fd = new FormData();
    //        fd.append('file', file);
    //        $http.post(uploadUrl, fd, {
    //            transformRequest: angular.identity,
    //            headers: { 'Content-Type': undefined }
    //        })
    //        .success(function () {
    //        })
    //        .error(function () {
    //        });
    //    }
    //}]);

    //myApp.controller('myCtrl', ['$scope', 'fileUpload', function ($scope, fileUpload) {

    //    $scope.uploadFile = function () {
    //        var file = $scope.myFile;
    //        console.log('file is ' + JSON.stringify(file));
    //        var uploadUrl = "/fileUpload";
    //        fileUpload.uploadFileToUrl(file, uploadUrl);
    //    };

    //}]);

    $(function () {
        $('#datepicker').datetimepicker();
    });

    $(function () {
        $('#datepicker1').datetimepicker();
    });


    </script>
}
